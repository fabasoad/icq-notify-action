(()=>{var e={7351:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.issue=t.issueCommand=void 0;const s=o(r(2037));const a=r(5278);function issueCommand(e,t,r){const n=new Command(e,t,r);process.stdout.write(n.toString()+s.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const u="::";class Command{constructor(e,t,r){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=r}toString(){let e=u+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const r in this.properties){if(this.properties.hasOwnProperty(r)){const n=this.properties[r];if(n){if(t){t=false}else{e+=","}e+=`${r}=${escapeProperty(n)}`}}}}e+=`${u}${escapeData(this.message)}`;return e}}function escapeData(e){return a.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return a.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},2186:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var s=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.getIDToken=t.getState=t.saveState=t.group=t.endGroup=t.startGroup=t.info=t.notice=t.warning=t.error=t.debug=t.isDebug=t.setFailed=t.setCommandEcho=t.setOutput=t.getBooleanInput=t.getMultilineInput=t.getInput=t.addPath=t.setSecret=t.exportVariable=t.ExitCode=void 0;const a=r(7351);const u=r(717);const l=r(5278);const c=o(r(2037));const d=o(r(1017));const p=r(8041);var f;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(f=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){const r=l.toCommandValue(t);process.env[e]=r;const n=process.env["GITHUB_ENV"]||"";if(n){return u.issueFileCommand("ENV",u.prepareKeyValueMessage(e,t))}a.issueCommand("set-env",{name:e},r)}t.exportVariable=exportVariable;function setSecret(e){a.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){const t=process.env["GITHUB_PATH"]||"";if(t){u.issueFileCommand("PATH",e)}else{a.issueCommand("add-path",{},e)}process.env["PATH"]=`${e}${d.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r){throw new Error(`Input required and not supplied: ${e}`)}if(t&&t.trimWhitespace===false){return r}return r.trim()}t.getInput=getInput;function getMultilineInput(e,t){const r=getInput(e,t).split("\n").filter((e=>e!==""));if(t&&t.trimWhitespace===false){return r}return r.map((e=>e.trim()))}t.getMultilineInput=getMultilineInput;function getBooleanInput(e,t){const r=["true","True","TRUE"];const n=["false","False","FALSE"];const i=getInput(e,t);if(r.includes(i))return true;if(n.includes(i))return false;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}\n`+`Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}t.getBooleanInput=getBooleanInput;function setOutput(e,t){const r=process.env["GITHUB_OUTPUT"]||"";if(r){return u.issueFileCommand("OUTPUT",u.prepareKeyValueMessage(e,t))}process.stdout.write(c.EOL);a.issueCommand("set-output",{name:e},l.toCommandValue(t))}t.setOutput=setOutput;function setCommandEcho(e){a.issue("echo",e?"on":"off")}t.setCommandEcho=setCommandEcho;function setFailed(e){process.exitCode=f.Failure;error(e)}t.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}t.isDebug=isDebug;function debug(e){a.issueCommand("debug",{},e)}t.debug=debug;function error(e,t={}){a.issueCommand("error",l.toCommandProperties(t),e instanceof Error?e.toString():e)}t.error=error;function warning(e,t={}){a.issueCommand("warning",l.toCommandProperties(t),e instanceof Error?e.toString():e)}t.warning=warning;function notice(e,t={}){a.issueCommand("notice",l.toCommandProperties(t),e instanceof Error?e.toString():e)}t.notice=notice;function info(e){process.stdout.write(e+c.EOL)}t.info=info;function startGroup(e){a.issue("group",e)}t.startGroup=startGroup;function endGroup(){a.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return s(this,void 0,void 0,(function*(){startGroup(e);let r;try{r=yield t()}finally{endGroup()}return r}))}t.group=group;function saveState(e,t){const r=process.env["GITHUB_STATE"]||"";if(r){return u.issueFileCommand("STATE",u.prepareKeyValueMessage(e,t))}a.issueCommand("save-state",{name:e},l.toCommandValue(t))}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState;function getIDToken(e){return s(this,void 0,void 0,(function*(){return yield p.OidcClient.getIDToken(e)}))}t.getIDToken=getIDToken;var h=r(1327);Object.defineProperty(t,"summary",{enumerable:true,get:function(){return h.summary}});var g=r(1327);Object.defineProperty(t,"markdownSummary",{enumerable:true,get:function(){return g.markdownSummary}});var m=r(2981);Object.defineProperty(t,"toPosixPath",{enumerable:true,get:function(){return m.toPosixPath}});Object.defineProperty(t,"toWin32Path",{enumerable:true,get:function(){return m.toWin32Path}});Object.defineProperty(t,"toPlatformPath",{enumerable:true,get:function(){return m.toPlatformPath}})},717:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.prepareKeyValueMessage=t.issueFileCommand=void 0;const s=o(r(7147));const a=o(r(2037));const u=r(8974);const l=r(5278);function issueFileCommand(e,t){const r=process.env[`GITHUB_${e}`];if(!r){throw new Error(`Unable to find environment variable for file command ${e}`)}if(!s.existsSync(r)){throw new Error(`Missing file at path: ${r}`)}s.appendFileSync(r,`${l.toCommandValue(t)}${a.EOL}`,{encoding:"utf8"})}t.issueFileCommand=issueFileCommand;function prepareKeyValueMessage(e,t){const r=`ghadelimiter_${u.v4()}`;const n=l.toCommandValue(t);if(e.includes(r)){throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`)}if(n.includes(r)){throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`)}return`${e}<<${r}${a.EOL}${n}${a.EOL}${r}`}t.prepareKeyValueMessage=prepareKeyValueMessage},8041:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.OidcClient=void 0;const i=r(6255);const o=r(5526);const s=r(2186);class OidcClient{static createHttpClient(e=true,t=10){const r={allowRetries:e,maxRetries:t};return new i.HttpClient("actions/oidc-client",[new o.BearerCredentialHandler(OidcClient.getRequestToken())],r)}static getRequestToken(){const e=process.env["ACTIONS_ID_TOKEN_REQUEST_TOKEN"];if(!e){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable")}return e}static getIDTokenUrl(){const e=process.env["ACTIONS_ID_TOKEN_REQUEST_URL"];if(!e){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable")}return e}static getCall(e){var t;return n(this,void 0,void 0,(function*(){const r=OidcClient.createHttpClient();const n=yield r.getJson(e).catch((e=>{throw new Error(`Failed to get ID Token. \n \n        Error Code : ${e.statusCode}\n \n        Error Message: ${e.result.message}`)}));const i=(t=n.result)===null||t===void 0?void 0:t.value;if(!i){throw new Error("Response json body do not have ID Token field")}return i}))}static getIDToken(e){return n(this,void 0,void 0,(function*(){try{let t=OidcClient.getIDTokenUrl();if(e){const r=encodeURIComponent(e);t=`${t}&audience=${r}`}s.debug(`ID token url is ${t}`);const r=yield OidcClient.getCall(t);s.setSecret(r);return r}catch(e){throw new Error(`Error message: ${e.message}`)}}))}}t.OidcClient=OidcClient},2981:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.toPlatformPath=t.toWin32Path=t.toPosixPath=void 0;const s=o(r(1017));function toPosixPath(e){return e.replace(/[\\]/g,"/")}t.toPosixPath=toPosixPath;function toWin32Path(e){return e.replace(/[/]/g,"\\")}t.toWin32Path=toWin32Path;function toPlatformPath(e){return e.replace(/[/\\]/g,s.sep)}t.toPlatformPath=toPlatformPath},1327:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.summary=t.markdownSummary=t.SUMMARY_DOCS_URL=t.SUMMARY_ENV_VAR=void 0;const i=r(2037);const o=r(7147);const{access:s,appendFile:a,writeFile:u}=o.promises;t.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";t.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";class Summary{constructor(){this._buffer=""}filePath(){return n(this,void 0,void 0,(function*(){if(this._filePath){return this._filePath}const e=process.env[t.SUMMARY_ENV_VAR];if(!e){throw new Error(`Unable to find environment variable for $${t.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`)}try{yield s(e,o.constants.R_OK|o.constants.W_OK)}catch(t){throw new Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}this._filePath=e;return this._filePath}))}wrap(e,t,r={}){const n=Object.entries(r).map((([e,t])=>` ${e}="${t}"`)).join("");if(!t){return`<${e}${n}>`}return`<${e}${n}>${t}</${e}>`}write(e){return n(this,void 0,void 0,(function*(){const t=!!(e===null||e===void 0?void 0:e.overwrite);const r=yield this.filePath();const n=t?u:a;yield n(r,this._buffer,{encoding:"utf8"});return this.emptyBuffer()}))}clear(){return n(this,void 0,void 0,(function*(){return this.emptyBuffer().write({overwrite:true})}))}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){this._buffer="";return this}addRaw(e,t=false){this._buffer+=e;return t?this.addEOL():this}addEOL(){return this.addRaw(i.EOL)}addCodeBlock(e,t){const r=Object.assign({},t&&{lang:t});const n=this.wrap("pre",this.wrap("code",e),r);return this.addRaw(n).addEOL()}addList(e,t=false){const r=t?"ol":"ul";const n=e.map((e=>this.wrap("li",e))).join("");const i=this.wrap(r,n);return this.addRaw(i).addEOL()}addTable(e){const t=e.map((e=>{const t=e.map((e=>{if(typeof e==="string"){return this.wrap("td",e)}const{header:t,data:r,colspan:n,rowspan:i}=e;const o=t?"th":"td";const s=Object.assign(Object.assign({},n&&{colspan:n}),i&&{rowspan:i});return this.wrap(o,r,s)})).join("");return this.wrap("tr",t)})).join("");const r=this.wrap("table",t);return this.addRaw(r).addEOL()}addDetails(e,t){const r=this.wrap("details",this.wrap("summary",e)+t);return this.addRaw(r).addEOL()}addImage(e,t,r){const{width:n,height:i}=r||{};const o=Object.assign(Object.assign({},n&&{width:n}),i&&{height:i});const s=this.wrap("img",null,Object.assign({src:e,alt:t},o));return this.addRaw(s).addEOL()}addHeading(e,t){const r=`h${t}`;const n=["h1","h2","h3","h4","h5","h6"].includes(r)?r:"h1";const i=this.wrap(n,e);return this.addRaw(i).addEOL()}addSeparator(){const e=this.wrap("hr",null);return this.addRaw(e).addEOL()}addBreak(){const e=this.wrap("br",null);return this.addRaw(e).addEOL()}addQuote(e,t){const r=Object.assign({},t&&{cite:t});const n=this.wrap("blockquote",e,r);return this.addRaw(n).addEOL()}addLink(e,t){const r=this.wrap("a",e,{href:t});return this.addRaw(r).addEOL()}}const l=new Summary;t.markdownSummary=l;t.summary=l},5278:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toCommandProperties=t.toCommandValue=void 0;function toCommandValue(e){if(e===null||e===undefined){return""}else if(typeof e==="string"||e instanceof String){return e}return JSON.stringify(e)}t.toCommandValue=toCommandValue;function toCommandProperties(e){if(!Object.keys(e).length){return{}}return{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}}t.toCommandProperties=toCommandProperties},8974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"v1",{enumerable:true,get:function(){return n.default}});Object.defineProperty(t,"v3",{enumerable:true,get:function(){return i.default}});Object.defineProperty(t,"v4",{enumerable:true,get:function(){return o.default}});Object.defineProperty(t,"v5",{enumerable:true,get:function(){return s.default}});Object.defineProperty(t,"NIL",{enumerable:true,get:function(){return a.default}});Object.defineProperty(t,"version",{enumerable:true,get:function(){return u.default}});Object.defineProperty(t,"validate",{enumerable:true,get:function(){return l.default}});Object.defineProperty(t,"stringify",{enumerable:true,get:function(){return c.default}});Object.defineProperty(t,"parse",{enumerable:true,get:function(){return d.default}});var n=_interopRequireDefault(r(1595));var i=_interopRequireDefault(r(6993));var o=_interopRequireDefault(r(1472));var s=_interopRequireDefault(r(6217));var a=_interopRequireDefault(r(2381));var u=_interopRequireDefault(r(427));var l=_interopRequireDefault(r(2609));var c=_interopRequireDefault(r(1458));var d=_interopRequireDefault(r(6385));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},5842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function md5(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("md5").update(e).digest()}var i=md5;t["default"]=i},2381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r="00000000-0000-0000-0000-000000000000";t["default"]=r},6385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(2609));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parse(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}let t;const r=new Uint8Array(16);r[0]=(t=parseInt(e.slice(0,8),16))>>>24;r[1]=t>>>16&255;r[2]=t>>>8&255;r[3]=t&255;r[4]=(t=parseInt(e.slice(9,13),16))>>>8;r[5]=t&255;r[6]=(t=parseInt(e.slice(14,18),16))>>>8;r[7]=t&255;r[8]=(t=parseInt(e.slice(19,23),16))>>>8;r[9]=t&255;r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255;r[11]=t/4294967296&255;r[12]=t>>>24&255;r[13]=t>>>16&255;r[14]=t>>>8&255;r[15]=t&255;return r}var i=parse;t["default"]=i},6230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;t["default"]=r},9784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=rng;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=new Uint8Array(256);let o=i.length;function rng(){if(o>i.length-16){n.default.randomFillSync(i);o=0}return i.slice(o,o+=16)}},8844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function sha1(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("sha1").update(e).digest()}var i=sha1;t["default"]=i},1458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(2609));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=[];for(let e=0;e<256;++e){i.push((e+256).toString(16).substr(1))}function stringify(e,t=0){const r=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,n.default)(r)){throw TypeError("Stringified UUID is invalid")}return r}var o=stringify;t["default"]=o},1595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(9784));var i=_interopRequireDefault(r(1458));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let o;let s;let a=0;let u=0;function v1(e,t,r){let l=t&&r||0;const c=t||new Array(16);e=e||{};let d=e.node||o;let p=e.clockseq!==undefined?e.clockseq:s;if(d==null||p==null){const t=e.random||(e.rng||n.default)();if(d==null){d=o=[t[0]|1,t[1],t[2],t[3],t[4],t[5]]}if(p==null){p=s=(t[6]<<8|t[7])&16383}}let f=e.msecs!==undefined?e.msecs:Date.now();let h=e.nsecs!==undefined?e.nsecs:u+1;const g=f-a+(h-u)/1e4;if(g<0&&e.clockseq===undefined){p=p+1&16383}if((g<0||f>a)&&e.nsecs===undefined){h=0}if(h>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}a=f;u=h;s=p;f+=122192928e5;const m=((f&268435455)*1e4+h)%4294967296;c[l++]=m>>>24&255;c[l++]=m>>>16&255;c[l++]=m>>>8&255;c[l++]=m&255;const v=f/4294967296*1e4&268435455;c[l++]=v>>>8&255;c[l++]=v&255;c[l++]=v>>>24&15|16;c[l++]=v>>>16&255;c[l++]=p>>>8|128;c[l++]=p&255;for(let e=0;e<6;++e){c[l+e]=d[e]}return t||(0,i.default)(c)}var l=v1;t["default"]=l},6993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(5920));var i=_interopRequireDefault(r(5842));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const o=(0,n.default)("v3",48,i.default);var s=o;t["default"]=s},5920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=_default;t.URL=t.DNS=void 0;var n=_interopRequireDefault(r(1458));var i=_interopRequireDefault(r(6385));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r))}return t}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=o;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s;function _default(e,t,r){function generateUUID(e,o,s,a){if(typeof e==="string"){e=stringToBytes(e)}if(typeof o==="string"){o=(0,i.default)(o)}if(o.length!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let u=new Uint8Array(16+e.length);u.set(o);u.set(e,o.length);u=r(u);u[6]=u[6]&15|t;u[8]=u[8]&63|128;if(s){a=a||0;for(let e=0;e<16;++e){s[a+e]=u[e]}return s}return(0,n.default)(u)}try{generateUUID.name=e}catch(e){}generateUUID.DNS=o;generateUUID.URL=s;return generateUUID}},1472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(9784));var i=_interopRequireDefault(r(1458));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v4(e,t,r){e=e||{};const o=e.random||(e.rng||n.default)();o[6]=o[6]&15|64;o[8]=o[8]&63|128;if(t){r=r||0;for(let e=0;e<16;++e){t[r+e]=o[e]}return t}return(0,i.default)(o)}var o=v4;t["default"]=o},6217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(5920));var i=_interopRequireDefault(r(8844));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const o=(0,n.default)("v5",80,i.default);var s=o;t["default"]=s},2609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6230));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function validate(e){return typeof e==="string"&&n.default.test(e)}var i=validate;t["default"]=i},427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(2609));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function version(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}return parseInt(e.substr(14,1),16)}var i=version;t["default"]=i},5526:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.PersonalAccessTokenCredentialHandler=t.BearerCredentialHandler=t.BasicCredentialHandler=void 0;class BasicCredentialHandler{constructor(e,t){this.username=e;this.password=t}prepareRequest(e){if(!e.headers){throw Error("The request has no headers")}e.headers["Authorization"]=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}t.BasicCredentialHandler=BasicCredentialHandler;class BearerCredentialHandler{constructor(e){this.token=e}prepareRequest(e){if(!e.headers){throw Error("The request has no headers")}e.headers["Authorization"]=`Bearer ${this.token}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}t.BearerCredentialHandler=BearerCredentialHandler;class PersonalAccessTokenCredentialHandler{constructor(e){this.token=e}prepareRequest(e){if(!e.headers){throw Error("The request has no headers")}e.headers["Authorization"]=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}t.PersonalAccessTokenCredentialHandler=PersonalAccessTokenCredentialHandler},6255:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var s=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.HttpClient=t.isHttps=t.HttpClientResponse=t.HttpClientError=t.getProxyUrl=t.MediaTypes=t.Headers=t.HttpCodes=void 0;const a=o(r(3685));const u=o(r(5687));const l=o(r(9835));const c=o(r(4294));var d;(function(e){e[e["OK"]=200]="OK";e[e["MultipleChoices"]=300]="MultipleChoices";e[e["MovedPermanently"]=301]="MovedPermanently";e[e["ResourceMoved"]=302]="ResourceMoved";e[e["SeeOther"]=303]="SeeOther";e[e["NotModified"]=304]="NotModified";e[e["UseProxy"]=305]="UseProxy";e[e["SwitchProxy"]=306]="SwitchProxy";e[e["TemporaryRedirect"]=307]="TemporaryRedirect";e[e["PermanentRedirect"]=308]="PermanentRedirect";e[e["BadRequest"]=400]="BadRequest";e[e["Unauthorized"]=401]="Unauthorized";e[e["PaymentRequired"]=402]="PaymentRequired";e[e["Forbidden"]=403]="Forbidden";e[e["NotFound"]=404]="NotFound";e[e["MethodNotAllowed"]=405]="MethodNotAllowed";e[e["NotAcceptable"]=406]="NotAcceptable";e[e["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";e[e["RequestTimeout"]=408]="RequestTimeout";e[e["Conflict"]=409]="Conflict";e[e["Gone"]=410]="Gone";e[e["TooManyRequests"]=429]="TooManyRequests";e[e["InternalServerError"]=500]="InternalServerError";e[e["NotImplemented"]=501]="NotImplemented";e[e["BadGateway"]=502]="BadGateway";e[e["ServiceUnavailable"]=503]="ServiceUnavailable";e[e["GatewayTimeout"]=504]="GatewayTimeout"})(d=t.HttpCodes||(t.HttpCodes={}));var p;(function(e){e["Accept"]="accept";e["ContentType"]="content-type"})(p=t.Headers||(t.Headers={}));var f;(function(e){e["ApplicationJson"]="application/json"})(f=t.MediaTypes||(t.MediaTypes={}));function getProxyUrl(e){const t=l.getProxyUrl(new URL(e));return t?t.href:""}t.getProxyUrl=getProxyUrl;const h=[d.MovedPermanently,d.ResourceMoved,d.SeeOther,d.TemporaryRedirect,d.PermanentRedirect];const g=[d.BadGateway,d.ServiceUnavailable,d.GatewayTimeout];const m=["OPTIONS","GET","DELETE","HEAD"];const v=10;const y=5;class HttpClientError extends Error{constructor(e,t){super(e);this.name="HttpClientError";this.statusCode=t;Object.setPrototypeOf(this,HttpClientError.prototype)}}t.HttpClientError=HttpClientError;class HttpClientResponse{constructor(e){this.message=e}readBody(){return s(this,void 0,void 0,(function*(){return new Promise((e=>s(this,void 0,void 0,(function*(){let t=Buffer.alloc(0);this.message.on("data",(e=>{t=Buffer.concat([t,e])}));this.message.on("end",(()=>{e(t.toString())}))}))))}))}}t.HttpClientResponse=HttpClientResponse;function isHttps(e){const t=new URL(e);return t.protocol==="https:"}t.isHttps=isHttps;class HttpClient{constructor(e,t,r){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=e;this.handlers=t||[];this.requestOptions=r;if(r){if(r.ignoreSslError!=null){this._ignoreSslError=r.ignoreSslError}this._socketTimeout=r.socketTimeout;if(r.allowRedirects!=null){this._allowRedirects=r.allowRedirects}if(r.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=r.allowRedirectDowngrade}if(r.maxRedirects!=null){this._maxRedirects=Math.max(r.maxRedirects,0)}if(r.keepAlive!=null){this._keepAlive=r.keepAlive}if(r.allowRetries!=null){this._allowRetries=r.allowRetries}if(r.maxRetries!=null){this._maxRetries=r.maxRetries}}}options(e,t){return s(this,void 0,void 0,(function*(){return this.request("OPTIONS",e,null,t||{})}))}get(e,t){return s(this,void 0,void 0,(function*(){return this.request("GET",e,null,t||{})}))}del(e,t){return s(this,void 0,void 0,(function*(){return this.request("DELETE",e,null,t||{})}))}post(e,t,r){return s(this,void 0,void 0,(function*(){return this.request("POST",e,t,r||{})}))}patch(e,t,r){return s(this,void 0,void 0,(function*(){return this.request("PATCH",e,t,r||{})}))}put(e,t,r){return s(this,void 0,void 0,(function*(){return this.request("PUT",e,t,r||{})}))}head(e,t){return s(this,void 0,void 0,(function*(){return this.request("HEAD",e,null,t||{})}))}sendStream(e,t,r,n){return s(this,void 0,void 0,(function*(){return this.request(e,t,r,n)}))}getJson(e,t={}){return s(this,void 0,void 0,(function*(){t[p.Accept]=this._getExistingOrDefaultHeader(t,p.Accept,f.ApplicationJson);const r=yield this.get(e,t);return this._processResponse(r,this.requestOptions)}))}postJson(e,t,r={}){return s(this,void 0,void 0,(function*(){const n=JSON.stringify(t,null,2);r[p.Accept]=this._getExistingOrDefaultHeader(r,p.Accept,f.ApplicationJson);r[p.ContentType]=this._getExistingOrDefaultHeader(r,p.ContentType,f.ApplicationJson);const i=yield this.post(e,n,r);return this._processResponse(i,this.requestOptions)}))}putJson(e,t,r={}){return s(this,void 0,void 0,(function*(){const n=JSON.stringify(t,null,2);r[p.Accept]=this._getExistingOrDefaultHeader(r,p.Accept,f.ApplicationJson);r[p.ContentType]=this._getExistingOrDefaultHeader(r,p.ContentType,f.ApplicationJson);const i=yield this.put(e,n,r);return this._processResponse(i,this.requestOptions)}))}patchJson(e,t,r={}){return s(this,void 0,void 0,(function*(){const n=JSON.stringify(t,null,2);r[p.Accept]=this._getExistingOrDefaultHeader(r,p.Accept,f.ApplicationJson);r[p.ContentType]=this._getExistingOrDefaultHeader(r,p.ContentType,f.ApplicationJson);const i=yield this.patch(e,n,r);return this._processResponse(i,this.requestOptions)}))}request(e,t,r,n){return s(this,void 0,void 0,(function*(){if(this._disposed){throw new Error("Client has already been disposed.")}const i=new URL(t);let o=this._prepareRequest(e,i,n);const s=this._allowRetries&&m.includes(e)?this._maxRetries+1:1;let a=0;let u;do{u=yield this.requestRaw(o,r);if(u&&u.message&&u.message.statusCode===d.Unauthorized){let e;for(const t of this.handlers){if(t.canHandleAuthentication(u)){e=t;break}}if(e){return e.handleAuthentication(this,o,r)}else{return u}}let t=this._maxRedirects;while(u.message.statusCode&&h.includes(u.message.statusCode)&&this._allowRedirects&&t>0){const s=u.message.headers["location"];if(!s){break}const a=new URL(s);if(i.protocol==="https:"&&i.protocol!==a.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}yield u.readBody();if(a.hostname!==i.hostname){for(const e in n){if(e.toLowerCase()==="authorization"){delete n[e]}}}o=this._prepareRequest(e,a,n);u=yield this.requestRaw(o,r);t--}if(!u.message.statusCode||!g.includes(u.message.statusCode)){return u}a+=1;if(a<s){yield u.readBody();yield this._performExponentialBackoff(a)}}while(a<s);return u}))}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(e,t){return s(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{function callbackForResult(e,t){if(e){n(e)}else if(!t){n(new Error("Unknown error"))}else{r(t)}}this.requestRawWithCallback(e,t,callbackForResult)}))}))}requestRawWithCallback(e,t,r){if(typeof t==="string"){if(!e.options.headers){e.options.headers={}}e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8")}let n=false;function handleResult(e,t){if(!n){n=true;r(e,t)}}const i=e.httpModule.request(e.options,(e=>{const t=new HttpClientResponse(e);handleResult(undefined,t)}));let o;i.on("socket",(e=>{o=e}));i.setTimeout(this._socketTimeout||3*6e4,(()=>{if(o){o.end()}handleResult(new Error(`Request timeout: ${e.options.path}`))}));i.on("error",(function(e){handleResult(e)}));if(t&&typeof t==="string"){i.write(t,"utf8")}if(t&&typeof t!=="string"){t.on("close",(function(){i.end()}));t.pipe(i)}else{i.end()}}getAgent(e){const t=new URL(e);return this._getAgent(t)}_prepareRequest(e,t,r){const n={};n.parsedUrl=t;const i=n.parsedUrl.protocol==="https:";n.httpModule=i?u:a;const o=i?443:80;n.options={};n.options.host=n.parsedUrl.hostname;n.options.port=n.parsedUrl.port?parseInt(n.parsedUrl.port):o;n.options.path=(n.parsedUrl.pathname||"")+(n.parsedUrl.search||"");n.options.method=e;n.options.headers=this._mergeHeaders(r);if(this.userAgent!=null){n.options.headers["user-agent"]=this.userAgent}n.options.agent=this._getAgent(n.parsedUrl);if(this.handlers){for(const e of this.handlers){e.prepareRequest(n.options)}}return n}_mergeHeaders(e){if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},lowercaseKeys(this.requestOptions.headers),lowercaseKeys(e||{}))}return lowercaseKeys(e||{})}_getExistingOrDefaultHeader(e,t,r){let n;if(this.requestOptions&&this.requestOptions.headers){n=lowercaseKeys(this.requestOptions.headers)[t]}return e[t]||n||r}_getAgent(e){let t;const r=l.getProxyUrl(e);const n=r&&r.hostname;if(this._keepAlive&&n){t=this._proxyAgent}if(this._keepAlive&&!n){t=this._agent}if(t){return t}const i=e.protocol==="https:";let o=100;if(this.requestOptions){o=this.requestOptions.maxSockets||a.globalAgent.maxSockets}if(r&&r.hostname){const e={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(r.username||r.password)&&{proxyAuth:`${r.username}:${r.password}`}),{host:r.hostname,port:r.port})};let n;const s=r.protocol==="https:";if(i){n=s?c.httpsOverHttps:c.httpsOverHttp}else{n=s?c.httpOverHttps:c.httpOverHttp}t=n(e);this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:o};t=i?new u.Agent(e):new a.Agent(e);this._agent=t}if(!t){t=i?u.globalAgent:a.globalAgent}if(i&&this._ignoreSslError){t.options=Object.assign(t.options||{},{rejectUnauthorized:false})}return t}_performExponentialBackoff(e){return s(this,void 0,void 0,(function*(){e=Math.min(v,e);const t=y*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}))}_processResponse(e,t){return s(this,void 0,void 0,(function*(){return new Promise(((r,n)=>s(this,void 0,void 0,(function*(){const i=e.message.statusCode||0;const o={statusCode:i,result:null,headers:{}};if(i===d.NotFound){r(o)}function dateTimeDeserializer(e,t){if(typeof t==="string"){const e=new Date(t);if(!isNaN(e.valueOf())){return e}}return t}let s;let a;try{a=yield e.readBody();if(a&&a.length>0){if(t&&t.deserializeDates){s=JSON.parse(a,dateTimeDeserializer)}else{s=JSON.parse(a)}o.result=s}o.headers=e.message.headers}catch(e){}if(i>299){let e;if(s&&s.message){e=s.message}else if(a&&a.length>0){e=a}else{e=`Failed request: (${i})`}const t=new HttpClientError(e,i);t.result=o.result;n(t)}else{r(o)}}))))}))}}t.HttpClient=HttpClient;const lowercaseKeys=e=>Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{})},9835:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.checkBypass=t.getProxyUrl=void 0;function getProxyUrl(e){const t=e.protocol==="https:";if(checkBypass(e)){return undefined}const r=(()=>{if(t){return process.env["https_proxy"]||process.env["HTTPS_PROXY"]}else{return process.env["http_proxy"]||process.env["HTTP_PROXY"]}})();if(r){return new URL(r)}else{return undefined}}t.getProxyUrl=getProxyUrl;function checkBypass(e){if(!e.hostname){return false}const t=process.env["no_proxy"]||process.env["NO_PROXY"]||"";if(!t){return false}let r;if(e.port){r=Number(e.port)}else if(e.protocol==="http:"){r=80}else if(e.protocol==="https:"){r=443}const n=[e.hostname.toUpperCase()];if(typeof r==="number"){n.push(`${n[0]}:${r}`)}for(const e of t.split(",").map((e=>e.trim().toUpperCase())).filter((e=>e))){if(n.some((t=>t===e))){return true}}return false}t.checkBypass=checkBypass},2863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Bot=void 0;var n=r(1366);var i=r(973);var o=r(4232);var s=r(46);var a=r(6190);var u=function(){function Bot(e,t){this.running=false;this.lastEventId=0;if(!e)throw new Error("Нет токена");this.token=e;this.apiBaseUrl=t&&t.apiUrlBase?t.apiUrlBase:"https://api.icq.net/bot/v1";this.name=t&&t.name?t.name:"NodeBot";this.version=t&&t.version?t.version:"0.0.1";this.timeoutS=t&&t.timeoutS?t.timeoutS:20;this.pollTimeS=t&&t.pollTimeS?t.pollTimeS:60;this.dispatcher=new o.DispatcherMessage(this);this.uin=this.token.split(":")[this.token.split(":").length-1];this.setHttpSession(new n.ICQHttpClient);this.dispatcher.addHandler(new a.SkipDuplicateMessageHandler({}))}Bot.prototype.getDispatcher=function(){return this.dispatcher};Bot.prototype.getUNI=function(){return this.uin};Bot.prototype.getUserAgent=function(){var e="2.0.0-beta";return this.name+"/"+this.version+" (uin="+(this.uin?this.uin:null)+") bot-nodejs/"+e};Bot.prototype.setHttpSession=function(e){this.http=e};Bot.prototype.startPolling=function(){var e=this;try{if(!this.running){console.log("Starting polling.");this.running=true;this.pollingThread=setTimeout((function(t){return e.polling()}))}}catch(e){console.error("Starting polling.",e)}return this};Bot.prototype.polling=function(){var e=this;if(this.running){try{this.eventsGet(this.pollTimeS,this.lastEventId).then((function(t){for(var r=0,n=t.events;r<n.length;r++){var i=n[r];e.dispatcher.dispatch(new s.ICQEvent(i))}e.polling()}))}catch(e){console.error("Exception while polling!",e)}}};Bot.prototype.stop=function(){if(this.running){console.log("Stopping bot.");this.running=false}return this};Bot.prototype.eventsGet=function(e,t){var r=this;return this.http.get(this.apiBaseUrl+"/events/get",{token:this.token,lastEventId:t,pollTime:e},{"user-agent":this.getUserAgent()}).then((function(e){return new Promise((function(t,n){if(e.events){e.events.forEach((function(e){r.lastEventId=r.lastEventId>e.eventId?r.lastEventId:e.eventId}))}t(e)}))}))};Bot.prototype.selfGet=function(){return this.http.get(this.apiBaseUrl+"/self/get",{token:this.token},{"user-agent":this.getUserAgent()})};Bot.prototype.sendText=function(e,t,r,n,i,o,s){if(r===void 0){r=""}if(n===void 0){n=""}if(i===void 0){i=""}var a={token:this.token,chatId:e,text:t.toString()};if(r)a["replyMsgId"]=r;if(n)a["forwardChatId"]=n;if(i)a["forwardMsgId"]=i;if(o){var u=this.getICQButtonList(o);if(u)a["inlineKeyboardMarkup"]=JSON.stringify(u)}if(s){if(!s.mode){a["format"]=JSON.stringify(s.range)}else{a["parseMode"]=`${s.mode}`}}return this.http.get(this.apiBaseUrl+"/messages/sendText",a,{"user-agent":this.getUserAgent()})};Bot.prototype.getICQButtonList=function(e){if(!e)return null;var t=[];if(Array.isArray(e[0])){for(var r=0,n=e;r<n.length;r++){var i=n[r];var o=[];for(var s=0,a=i;s<a.length;s++){var u=a[s];o.push(u.getQueryStructure())}t.push(o)}return t}else if(Array.isArray(e)){for(var l=0,c=e;l<c.length;l++){var u=c[l];t.push(u.getQueryStructure())}return[t]}else{return[[e.getQueryStructure()]]}};Bot.prototype.sendFile=function(e,t,r,n,o,s,a,u,l){if(r){var c=new i.FormDataICQ;c.append("token",this.token);c.append("chatId",e);if(n)c.append("caption",n);if(o)c.append("replyMsgId",o);if(s)c.append("forwardChatId",s);if(a)c.append("forwardMsgId",a);c.appendFile("file",r);if(u){var d=this.getICQButtonList(u);if(d)c.append("inlineKeyboardMarkup",d)}if(l){if(!l.mode){c.append("format",JSON.stringify(l.range))}else{c.append("parseMode",l.mode)}}return this.http.post(this.apiBaseUrl+"/messages/sendFile",c,{"user-agent":this.getUserAgent()})}else{var p={token:this.token,chatId:e,fileId:t};if(n)p["caption"]=n;if(o)p["replyMsgId"]=o;if(s)p["forwardChatId"]=s;if(a)p["forwardMsgId"]=a;if(u){var d=this.getICQButtonList(u);if(d)p["inlineKeyboardMarkup"]=JSON.stringify(d)}if(l){if(!l.mode){p["format"]=JSON.stringify(l.range)}else{p["parseMode"]=l.mode}}return this.http.get(this.apiBaseUrl+"/messages/sendFile",p,{"user-agent":this.getUserAgent()})}};Bot.prototype.sendVoice=function(e,t,r,n,o,s,a){if(r){var u=new i.FormDataICQ;u.append("token",this.token);u.append("chatId",e);u.append("fileId",t);if(n)u.append("replyMsgId",n);if(o)u.append("forwardChatId",o);if(s)u.append("forwardMsgId",s);if(a){var l=this.getICQButtonList(a);if(l)u.append("inlineKeyboardMarkup",l)}u.appendFile("file",r);return this.http.post(this.apiBaseUrl+"/messages/sendVoice",u,{"user-agent":this.getUserAgent()})}else{var c={token:this.token,chatId:e,fileId:t};if(n)c["replyMsgId"]=n;if(o)c["forwardChatId"]=o;if(s)c["forwardMsgId"]=s;if(a){var l=this.getICQButtonList(a);if(l)c["inlineKeyboardMarkup"]=JSON.stringify(l)}return this.http.get(this.apiBaseUrl+"/messages/sendVoice",c,{"user-agent":this.getUserAgent()})}};Bot.prototype.editText=function(e,t,r,n,i){var o={token:this.token,chatId:e,msgId:t,text:r};if(n){var s=this.getICQButtonList(n);if(s)o["inlineKeyboardMarkup"]=JSON.stringify(s)}if(i){if(!i.mode){o["format"]=JSON.stringify(i.range)}else{o["parseMode"]=i.mode}}return this.http.get(this.apiBaseUrl+"/messages/editText",o,{"user-agent":this.getUserAgent()})};Bot.prototype.deleteMessages=function(e,t){return this.http.get(this.apiBaseUrl+"/messages/deleteMessages",{token:this.token,chatId:e,msgId:t},{"user-agent":this.getUserAgent()})};Bot.prototype.answerCallbackQuery=function(e,t,r,n){var i={token:this.token,queryId:e,text:t};if(r)i["showAlert"]=r;if(n)i["url"]=n;return this.http.get(this.apiBaseUrl+"/messages/answerCallbackQuery",i,{"user-agent":this.getUserAgent()})};Bot.prototype.sendActions=function(e,t){return this.http.get(this.apiBaseUrl+"/chats/sendActions",{token:this.token,chatId:e,actions:t},{"user-agent":this.getUserAgent()})};Bot.prototype.getChatInfo=function(e){return this.http.get(this.apiBaseUrl+"/chats/getInfo",{token:this.token,chatId:e},{"user-agent":this.getUserAgent()})};Bot.prototype.getChatAdmins=function(e){return this.http.get(this.apiBaseUrl+"/chats/getAdmins",{token:this.token,chatId:e},{"user-agent":this.getUserAgent()})};Bot.prototype.getFileInfo=function(e){return this.http.get(this.apiBaseUrl+"/files/getInfo",{token:this.token,fileId:e},{"user-agent":this.getUserAgent()})};Bot.prototype.pinMessage=function(e,t){return this.http.get(this.apiBaseUrl+"/chats/pinMessage",{token:this.token,chatId:e,msgId:t},{"user-agent":this.getUserAgent()})};Bot.prototype.unpinMessage=function(e,t){return this.http.get(this.apiBaseUrl+"/chats/unpinMessage",{token:this.token,chatId:e,msgId:t},{"user-agent":this.getUserAgent()})};Bot.prototype.setTitle=function(e,t){return this.http.get(this.apiBaseUrl+"/chats/setTitle",{token:this.token,chatId:e,title:t},{"user-agent":this.getUserAgent()})};Bot.prototype.setAbout=function(e,t){return this.http.get(this.apiBaseUrl+"/chats/setAbout",{token:this.token,chatId:e,about:t},{"user-agent":this.getUserAgent()})};Bot.prototype.setRules=function(e,t){return this.http.get(this.apiBaseUrl+"/chats/setRules",{token:this.token,chatId:e,rules:t},{"user-agent":this.getUserAgent()})};Bot.prototype.setAvatar=function(e,t){var r=new i.FormDataICQ;r.append("token",this.token);r.append("chatId",e);r.appendFile("image",t);return this.http.post(this.apiBaseUrl+"/chats/avatar/set",r,{"user-agent":this.getUserAgent()})};Bot.prototype.getMembers=function(e,t){var r={token:this.token,chatId:e};if(t)r["cursor"]=t;return this.http.get(this.apiBaseUrl+"/chats/getMembers",r,{"user-agent":this.getUserAgent()})};Bot.prototype.deleteMembers=function(e,t){var r={token:this.token,chatId:e,members:JSON.stringify(t)};return this.http.get(this.apiBaseUrl+"/chats/members/delete",r,{"user-agent":this.getUserAgent()})};Bot.prototype.getBlockedUsers=function(e){return this.http.get(this.apiBaseUrl+"/chats/getBlockedUsers",{token:this.token,chatId:e},{"user-agent":this.getUserAgent()})};Bot.prototype.getPendingUsers=function(e){return this.http.get(this.apiBaseUrl+"/chats/getPendingUsers",{token:this.token,chatId:e},{"user-agent":this.getUserAgent()})};Bot.prototype.blockUser=function(e,t,r){var n={token:this.token,chatId:e,userId:t};if(r)n["delLastMessages"]=true;return this.http.get(this.apiBaseUrl+"/chats/blockUser",n,{"user-agent":this.getUserAgent()})};Bot.prototype.unblockUser=function(e,t){var r={token:this.token,chatId:e,userId:t};return this.http.get(this.apiBaseUrl+"/chats/unblockUser",r,{"user-agent":this.getUserAgent()})};Bot.prototype.resolvePending=function(e,t,r,n){var i={token:this.token,chatId:e};if(t)i["approve"]=true;if(n)i["everyone"]=true;if(r)i["userId"]=r;if(n==!!r)throw new Error("Должен быть указан один из двух параметров: userId или everyone. Эти параметры не могут быть указаны одновременно.");return this.http.get(this.apiBaseUrl+"/chats/resolvePending",i,{"user-agent":this.getUserAgent()})};return Bot}();t.Bot=u},4232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DispatcherMessage=void 0;var r=function(){function DispatcherMessage(e){this.bot=e;this.handlers=[]}DispatcherMessage.prototype.getBot=function(){return this.bot};DispatcherMessage.prototype.getHandlers=function(){return this.handlers};DispatcherMessage.prototype.addHandler=function(e){if(this.handlers.findIndex((function(t){return t===e}))>=0)return;this.handlers.push(e)};DispatcherMessage.prototype.removeHandler=function(e){if(this.handlers.indexOf(e)!=-1){this.handlers=this.handlers.filter((function(t){return t!==e}))}};DispatcherMessage.prototype.dispatch=function(e){var t=this;try{for(var r=0,n=this.handlers.filter((function(r){return r.check(e,t)}));r<n.length;r++){var i=n[r];i.handle(e,this)}}catch(e){console.error("Caught '"+e+"' exception, stopping dispatching.");this.bot.stop()}};return DispatcherMessage}();t.DispatcherMessage=r},973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FormDataICQ=void 0;var n=r(7147);var i=function(){function FormDataICQ(){this.data=[];this.files=[];this.razdel="----WebKitFormBoundary"+(Math.random()*Math.pow(10,18)).toString(16)}FormDataICQ.prototype.getBoundary=function(){return this.razdel};FormDataICQ.prototype.append=function(e,t){this.data.push({name:e,value:t})};FormDataICQ.prototype.appendFile=function(e,t){if(!n.existsSync(t))throw"File not exist "+t;this.files.push({name:e,filename:t})};FormDataICQ.prototype.toString=function(){var e="";for(var t=0,r=this.files;t<r.length;t++){var i=r[t];e+="--"+this.razdel+"\r\n";var o=i.filename.split(/(\/|\\)/g);var s=i.filename.split(".");var a=s[s.length-1];e+='Content-Disposition: form-data; name="'+i.name+'"; filename="'+o[o.length-1]+'"\r\n';if(/(jpg|jpeg|png|gif)/i.test(a)){e+='Content-Type: "image/'+a+'"\r\n\r\n'}else if(/(txt|html|css|cmd|htm|json)/i.test(a)){e+='Content-Type: "text/'+a+'"\r\n\r\n'}else{e+='Content-Type: "application/octet-stream"\r\n\r\n'}e+=n.readFileSync(i.filename,"latin1")}for(var u=0,l=this.data;u<l.length;u++){var i=l[u];if(e)e+="\r\n";e+="--"+this.razdel+"\r\n";e+='Content-Disposition: form-data; name="'+i.name+'"\r\n\r\n';e+=Buffer.from(i.value.toString(),"utf8").toString("latin1")}e+="\r\n--"+this.razdel+"--";return e};return FormDataICQ}();t.FormDataICQ=i},9119:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ICQButton=void 0;var r=function(){function ICQButton(e,t,r){if(r===void 0){r=null}this.text=e;this.callbackData=t;this.url=r}ICQButton.prototype.getQueryStructure=function(){if(this.url){return{text:this.text,url:this.url}}else{return{text:this.text,callbackData:this.callbackData}}};return ICQButton}();t.ICQButton=r},46:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ICQEvent=void 0;var n=r(4268);var i=function(){function ICQEvent(e){this.type=e.type;this.data=e.payload;if(this.type==n.EventType.NEW_MESSAGE||this.type==n.EventType.EDITED_MESSAGE||this.type==n.EventType.PINNED_MESSAGE){this.text=this.data.text;this.messageAuthor=this.data.from}if(this.data&&this.data.chat){this.fromChatId=this.data.chat.chatId}}return ICQEvent}();t.ICQEvent=i},1366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ICQHttpClient=void 0;var n=r(7310);var i=r(5687);var o=function(){function ICQHttpClient(){}ICQHttpClient.prototype.get=function(e,t,r){return new Promise((function(o,s){var a="?";for(var u in t){if(Array.isArray(t[u])){for(var l=0,c=t[u];l<c.length;l++){var d=c[l];a+=encodeURIComponent(u)+"="+encodeURIComponent(d)+"&"}}else{a+=encodeURIComponent(u)+"="+encodeURIComponent(t[u])+"&"}}a=a.slice(0,-1);console.log(a);var p=new n.URL(e);var f=i.request({host:p.hostname,port:p.port,path:""+p.pathname+a,method:"GET",headers:{"user-agent":r["user-agent"]}},(function(e){e.setEncoding("utf8");var t="";e.on("data",(function(e){t+=e}));e.on("end",(function(e){try{o(JSON.parse(t.toString()))}catch(e){console.log(e.message)}}))}));f.on("error",(function(e){s(e)}));f.end()}))};ICQHttpClient.prototype.post=function(e,t,r){return new Promise((function(o,s){var a=new n.URL(e);var u=t.toString();var l=i.request({host:a.hostname,path:a.pathname,port:a.port,method:"POST",headers:{"Content-Type":"multipart/form-data; boundary="+t.getBoundary(),"user-agent":r["user-agent"]}},(function(e){e.setEncoding("utf8");var t="";e.on("data",(function(e){t+=e}));e.on("end",(function(){o(JSON.parse(t.toString()))}))}));l.on("error",(function(e){s(e)}));l.write(u,"latin1");l.end()}))};return ICQHttpClient}();t.ICQHttpClient=o},6190:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.SkipDuplicateMessageHandler=void 0;var i=r(200);var o=function(e){n(SkipDuplicateMessageHandler,e);function SkipDuplicateMessageHandler(t){var r=e.call(this,null,null)||this;r.cache=t;if(!r.cache)r.cache={};return r}SkipDuplicateMessageHandler.prototype.check=function(t,r){if(e.prototype.check.call(this,t,r)){for(var n in this.cache){if(n&&n==t.data.msgId&&this.cache[n]==t.text){throw new Error("Caught StopDispatching id'"+n+"' exception, stopping dispatching.")}}this.cache[t.data.msgId]=t.text}return true};return SkipDuplicateMessageHandler}(i.MessageHandler);t.SkipDuplicateMessageHandler=o},4123:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(2863);var i=r(200);var o=r(1539);var s=r(9119);var a=function(){function ICQ(){}ICQ.Button=s.ICQButton;ICQ.Bot=n.Bot;ICQ.Filter=o.Filter;ICQ.Handler={HelpCommand:i.HelpCommandHandler,Message:i.MessageHandler,NewChatMembers:i.NewChatMembersHandler,LeftChatMembers:i.LeftChatMembersHandler,PinnedMessage:i.PinnedMessageHandler,UnPinnedMessage:i.UnPinnedMessageHandler,EditedMessage:i.EditedMessageHandler,DeletedMessage:i.DeletedMessageHandler,Command:i.CommandHandler,StartCommand:i.StartCommandHandler,FeedbackCommand:i.FeedbackCommandHandler,UnknownCommand:i.UnknownCommandHandler,All:i.DefaultHandler,BotButtonCommand:i.BotButtonCommandHandler};return ICQ}();t["default"]=a},8566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PayLoadFileType=t.PartsType=void 0;var r;(function(e){e["FILE"]="file";e["STICKER"]="sticker";e["MENTION"]="mention";e["VOICE"]="voice";e["FORWARD"]="forward";e["REPLY"]="reply"})(r=t.PartsType||(t.PartsType={}));var n;(function(e){e["IMAGE"]="image";e["VIDEO"]="video";e["AUDIO"]="audio"})(n=t.PayLoadFileType||(t.PayLoadFileType={}))},4268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EventType=void 0;var r;(function(e){e["NEW_MESSAGE"]="newMessage";e["EDITED_MESSAGE"]="editedMessage";e["DELETED_MESSAGE"]="deletedMessage";e["PINNED_MESSAGE"]="pinnedMessage";e["UNPINNED_MESSAGE"]="unpinnedMessage";e["NEW_CHAT_MEMBERS"]="newChatMembers";e["LEFT_CHAT_MEMBERS"]="leftChatMembers";e["CHANGED_CHAT_INFO"]="changedChatInfo";e["CALLBACK_QUERY"]="callbackQuery"})(r=t.EventType||(t.EventType={}))},1539:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.Filter=t.FilterComposite=t.TypeFilterOperation=t.URLFilter=t.ReplyFilter=t.ForwardFilter=t.MentionFilter=t.StickerFilter=t.AudioFilter=t.VideoFilter=t.ImageFilter=t.FileFilter=t.SenderFilter=t.RegexpFilter=t.CommandFilter=t.MessageFilter=void 0;var i=r(8566);var o=function(){function MessageFilter(){}MessageFilter.prototype.filter=function(e){return e.data["text"]&&e["text"].length>0};return MessageFilter}();t.MessageFilter=o;var s=function(e){n(CommandFilter,e);function CommandFilter(){var t=e!==null&&e.apply(this,arguments)||this;t.COMMAND_PREFIXES=["/","."];return t}CommandFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&this.COMMAND_PREFIXES.findIndex((function(e){return e===t.data.text.trim()[0]}))>=0};return CommandFilter}(o);t.CommandFilter=s;var a=function(e){n(RegexpFilter,e);function RegexpFilter(t){var r=e.call(this)||this;r.pattern=t;return r}RegexpFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&this.pattern.test(t.data["text"])};return RegexpFilter}(o);t.RegexpFilter=a;var u=function(e){n(SenderFilter,e);function SenderFilter(t){var r=e.call(this)||this;r.user_id=t;return r}SenderFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&t.data["from"]&&t.data["from"]["userId"]==this.user_id};return SenderFilter}(o);t.SenderFilter=u;var l=function(e){n(FileFilter,e);function FileFilter(){return e!==null&&e.apply(this,arguments)||this}FileFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&t.data["parts"]&&t.data["parts"].findIndex((function(e){return e&&e.type==i.PartsType.FILE}))>=0};return FileFilter}(o);t.FileFilter=l;var c=function(e){n(ImageFilter,e);function ImageFilter(){return e!==null&&e.apply(this,arguments)||this}ImageFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&t.data["parts"].findIndex((function(e){return e&&e["payload"]&&e.payload["type"]&&e.payload.type==i.PayLoadFileType.IMAGE}))>=0};return ImageFilter}(l);t.ImageFilter=c;var d=function(e){n(VideoFilter,e);function VideoFilter(){return e!==null&&e.apply(this,arguments)||this}VideoFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&t.data["parts"].findIndex((function(e){return e&&e["payload"]&&e.payload["type"]&&e.payload.type==i.PayLoadFileType.VIDEO}))>=0};return VideoFilter}(l);t.VideoFilter=d;var p=function(e){n(AudioFilter,e);function AudioFilter(){return e!==null&&e.apply(this,arguments)||this}AudioFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&t.data["parts"].findIndex((function(e){return e&&e["payload"]&&e.payload["type"]&&e.payload.type==i.PayLoadFileType.AUDIO}))>=0};return AudioFilter}(l);t.AudioFilter=p;var f=function(e){n(StickerFilter,e);function StickerFilter(){return e!==null&&e.apply(this,arguments)||this}StickerFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&t.data["parts"]&&t.data["parts"].findIndex((function(e){return e&&e.type==i.PartsType.STICKER}))>=0};return StickerFilter}(o);t.StickerFilter=f;var h=function(e){n(MentionFilter,e);function MentionFilter(t){var r=e.call(this)||this;r.userId=t;return r}MentionFilter.prototype.filter=function(t){var r=this;return e.prototype.filter.call(this,t)&&t.data["parts"]&&t.data["parts"].findIndex((function(e){return e&&e.type==i.PartsType.MENTION&&(!r.userId||e.payload.userId==r.userId)}))>=0};return MentionFilter}(o);t.MentionFilter=h;var g=function(e){n(ForwardFilter,e);function ForwardFilter(){return e!==null&&e.apply(this,arguments)||this}ForwardFilter.prototype.filter=function(e){return e.data["parts"]&&e.data.parts.findIndex((function(e){return e&&e.type==i.PartsType.FORWARD}))>=0};return ForwardFilter}(o);t.ForwardFilter=g;var m=function(e){n(ReplyFilter,e);function ReplyFilter(){return e!==null&&e.apply(this,arguments)||this}ReplyFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&t.data["parts"]&&t.data.parts.findIndex((function(e){return e&&e.type==i.PartsType.REPLY}))>=0};return ReplyFilter}(o);t.ReplyFilter=m;var v=function(e){n(URLFilter,e);function URLFilter(){return e.call(this,/^\s*https?:\/\/\S+\s*$/i)||this}URLFilter.prototype.filter=function(t){return e.prototype.filter.call(this,t)&&!(new l).filter(t)};return URLFilter}(a);t.URLFilter=v;var y;(function(e){e[e["and"]=1]="and";e[e["or"]=2]="or";e[e["not"]=3]="not"})(y=t.TypeFilterOperation||(t.TypeFilterOperation={}));var _=function(){function FilterComposite(e,t,r){this.type=e;this.leftFilter=t;this.rightFilter=r}FilterComposite.and=function(e,t){return new FilterComposite(y.and,e,t)};FilterComposite.or=function(e,t){return new FilterComposite(y.or,e,t)};FilterComposite.not=function(e){return new FilterComposite(y.not,e)};FilterComposite.prototype.filter=function(e){switch(this.type){case y.and:return this.leftFilter.filter(e)&&this.rightFilter.filter(e);case y.or:return this.leftFilter.filter(e)||this.rightFilter.filter(e);case y.not:return!this.leftFilter.filter(e)}throw"Not type filter"};return FilterComposite}();t.FilterComposite=_;var C=function(){function Filter(){}Filter.message=new o;Filter.command=new s;Filter.file=new l;Filter.image=new c;Filter.video=new d;Filter.audio=new p;Filter.media=_.or(_.or(Filter.image,Filter.video),Filter.audio);Filter.data=_.and(Filter.file,_.not(Filter.media));Filter.sticker=new f;Filter.url=new v;Filter.text=_.and(Filter.message,_.not(_.or(_.or(_.or(Filter.command,Filter.sticker),Filter.file),Filter.url)));Filter.regexp=a;Filter.mention=h;Filter.forward=new g;Filter.reply=new m;Filter.sender=u;return Filter}();t.Filter=C},200:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var o=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function verb(e){return function(t){return step([e,t])}}function step(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};Object.defineProperty(t,"__esModule",{value:true});t.BotButtonCommandHandler=t.UnknownCommandHandler=t.FeedbackCommandHandler=t.StartCommandHandler=t.HelpCommandHandler=t.CommandHandler=t.DeletedMessageHandler=t.EditedMessageHandler=t.MessageHandler=t.UnPinnedMessageHandler=t.PinnedMessageHandler=t.LeftChatMembersHandler=t.NewChatMembersHandler=t.DefaultHandler=t.HandlerBase=void 0;var s=r(1539);var a=r(4268);var u=r(6190);var l=function(){function HandlerBase(e,t){this.filters=e;this.callback=t}HandlerBase.prototype.check=function(e,t){return!this.filters||this.filters.filter(e)};HandlerBase.prototype.handle=function(e,t){if(this.callback){this.callback(t.getBot(),e)}};return HandlerBase}();t.HandlerBase=l;var c=function(e){n(DefaultHandler,e);function DefaultHandler(t){if(t===void 0){t=null}return e.call(this,null,t)||this}DefaultHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)&&!this.any(t,r)};DefaultHandler.prototype.any=function(e,t){for(var r=0,n=t.getHandlers();r<n.length;r++){var i=n[r];if(i!=this&&!(i instanceof u.SkipDuplicateMessageHandler)){if(i.check(e,t))return true}}return false};return DefaultHandler}(l);t.DefaultHandler=c;var d=function(e){n(NewChatMembersHandler,e);function NewChatMembersHandler(){return e!==null&&e.apply(this,arguments)||this}NewChatMembersHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)&&t.type==a.EventType.NEW_CHAT_MEMBERS};return NewChatMembersHandler}(l);t.NewChatMembersHandler=d;var p=function(e){n(LeftChatMembersHandler,e);function LeftChatMembersHandler(){return e!==null&&e.apply(this,arguments)||this}LeftChatMembersHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)&&t.type==a.EventType.LEFT_CHAT_MEMBERS};return LeftChatMembersHandler}(l);t.LeftChatMembersHandler=p;var f=function(e){n(PinnedMessageHandler,e);function PinnedMessageHandler(){return e!==null&&e.apply(this,arguments)||this}PinnedMessageHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)&&t.type==a.EventType.PINNED_MESSAGE};return PinnedMessageHandler}(l);t.PinnedMessageHandler=f;var h=function(e){n(UnPinnedMessageHandler,e);function UnPinnedMessageHandler(){return e!==null&&e.apply(this,arguments)||this}UnPinnedMessageHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t=t,r=r)&&t.type==a.EventType.UNPINNED_MESSAGE};return UnPinnedMessageHandler}(l);t.UnPinnedMessageHandler=h;var g=function(e){n(MessageHandler,e);function MessageHandler(){return e!==null&&e.apply(this,arguments)||this}MessageHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)&&t.type==a.EventType.NEW_MESSAGE};return MessageHandler}(l);t.MessageHandler=g;var m=function(e){n(EditedMessageHandler,e);function EditedMessageHandler(){return e!==null&&e.apply(this,arguments)||this}EditedMessageHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)&&t.type==a.EventType.EDITED_MESSAGE};return EditedMessageHandler}(l);t.EditedMessageHandler=m;var v=function(e){n(DeletedMessageHandler,e);function DeletedMessageHandler(){return e!==null&&e.apply(this,arguments)||this}DeletedMessageHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)&&t.type==a.EventType.DELETED_MESSAGE};return DeletedMessageHandler}(l);t.DeletedMessageHandler=v;var y=function(e){n(CommandHandler,e);function CommandHandler(t,r,n){if(t===void 0){t=null}if(r===void 0){r=null}if(n===void 0){n=null}var i=e.call(this,r,n)||this;i.filters=r?r:s.Filter.command;i.callback=n;i.command=t;return i}CommandHandler.prototype.check=function(t,r){if(e.prototype.check.call(this,t,r)){if(!this.command)return true;var n=t.data.text.split(" ")[0].toLowerCase().replace(/^(.|\/)/,"");if(Array.isArray(this.command))return this.command.findIndex((function(e){return e.toLowerCase()==n}))>=0;return this.command==n}return false};CommandHandler.prototype.any=function(e,t){for(var r=0,n=t.getHandlers();r<n.length;r++){var i=n[r];if(i!=this&&i instanceof CommandHandler){if(i.check(e,t))return true}}return false};return CommandHandler}(g);t.CommandHandler=y;var _=function(e){n(HelpCommandHandler,e);function HelpCommandHandler(t,r){return e.call(this,"help",t,r)||this}return HelpCommandHandler}(y);t.HelpCommandHandler=_;var C=function(e){n(StartCommandHandler,e);function StartCommandHandler(t,r){return e.call(this,"start",t,r)||this}return StartCommandHandler}(y);t.StartCommandHandler=C;var w=function(e){n(FeedbackCommandHandler,e);function FeedbackCommandHandler(t,r,n,i,o,s){if(r===void 0){r="Feedback from {source}: {message}"}if(n===void 0){n="Got it!"}if(i===void 0){i=null}if(o===void 0){o="feedback"}if(s===void 0){s=null}var a=e.call(this,o,s)||this;a.callback=a.message_cb;a.target=t;a.message=r;a.reply=n;a.error_reply=i;return a}FeedbackCommandHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)};FeedbackCommandHandler.prototype.message_cb=function(e,t){return i(this,void 0,void 0,(function(){var r,n,i,s,a,s;return o(this,(function(o){switch(o.label){case 0:r=t.data["chat"]["chatId"];n=t.data["text"].split(" ");n.shift();i=n.join(" ").trim();if(!i)return[3,4];return[4,e.sendText(this.target,this.message.replace(/\{source\}/i,r).replace(/\{message\}/i,i))];case 1:s=o.sent();if(!s.ok)console.log("Не удалось отправить запрос sendText");if(!(this.reply!=""))return[3,3];return[4,e.sendText(r,this.reply)];case 2:a=o.sent();if(!a.ok)console.log("Не удалось отправить запрос sendText");o.label=3;case 3:return[3,6];case 4:if(!(this.error_reply!=""))return[3,6];return[4,e.sendText(r,this.error_reply)];case 5:s=o.sent();if(!s.ok)console.log("Не удалось отправить запрос sendText");o.label=6;case 6:return[2]}}))}))};return FeedbackCommandHandler}(y);t.FeedbackCommandHandler=w;var b=function(e){n(UnknownCommandHandler,e);function UnknownCommandHandler(t,r){return e.call(this,null,t,r)||this}UnknownCommandHandler.prototype.check=function(t,r){var n=this;return e.prototype.check.call(this,t,r)&&r.handlers.findIndex((function(e){return e!=n&&e.check(t,r)}))==-1};UnknownCommandHandler.prototype.handle=function(t,r){e.prototype.handle.call(this,t,r);throw new Error("UnknownCommandHandler")};return UnknownCommandHandler}(y);t.UnknownCommandHandler=b;var k=function(e){n(BotButtonCommandHandler,e);function BotButtonCommandHandler(){return e!==null&&e.apply(this,arguments)||this}BotButtonCommandHandler.prototype.check=function(t,r){return e.prototype.check.call(this,t,r)&&t.type==a.EventType.CALLBACK_QUERY};return BotButtonCommandHandler}(l);t.BotButtonCommandHandler=k},4294:(e,t,r)=>{e.exports=r(4219)},4219:(e,t,r)=>{"use strict";var n=r(1808);var i=r(4404);var o=r(3685);var s=r(5687);var a=r(2361);var u=r(9491);var l=r(3837);t.httpOverHttp=httpOverHttp;t.httpsOverHttp=httpsOverHttp;t.httpOverHttps=httpOverHttps;t.httpsOverHttps=httpsOverHttps;function httpOverHttp(e){var t=new TunnelingAgent(e);t.request=o.request;return t}function httpsOverHttp(e){var t=new TunnelingAgent(e);t.request=o.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function httpOverHttps(e){var t=new TunnelingAgent(e);t.request=s.request;return t}function httpsOverHttps(e){var t=new TunnelingAgent(e);t.request=s.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function TunnelingAgent(e){var t=this;t.options=e||{};t.proxyOptions=t.options.proxy||{};t.maxSockets=t.options.maxSockets||o.Agent.defaultMaxSockets;t.requests=[];t.sockets=[];t.on("free",(function onFree(e,r,n,i){var o=toOptions(r,n,i);for(var s=0,a=t.requests.length;s<a;++s){var u=t.requests[s];if(u.host===o.host&&u.port===o.port){t.requests.splice(s,1);u.request.onSocket(e);return}}e.destroy();t.removeSocket(e)}))}l.inherits(TunnelingAgent,a.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(e,t,r,n){var i=this;var o=mergeOptions({request:e},i.options,toOptions(t,r,n));if(i.sockets.length>=this.maxSockets){i.requests.push(o);return}i.createSocket(o,(function(t){t.on("free",onFree);t.on("close",onCloseOrRemove);t.on("agentRemove",onCloseOrRemove);e.onSocket(t);function onFree(){i.emit("free",t,o)}function onCloseOrRemove(e){i.removeSocket(t);t.removeListener("free",onFree);t.removeListener("close",onCloseOrRemove);t.removeListener("agentRemove",onCloseOrRemove)}}))};TunnelingAgent.prototype.createSocket=function createSocket(e,t){var r=this;var n={};r.sockets.push(n);var i=mergeOptions({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:false,headers:{host:e.host+":"+e.port}});if(e.localAddress){i.localAddress=e.localAddress}if(i.proxyAuth){i.headers=i.headers||{};i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")}c("making CONNECT request");var o=r.request(i);o.useChunkedEncodingByDefault=false;o.once("response",onResponse);o.once("upgrade",onUpgrade);o.once("connect",onConnect);o.once("error",onError);o.end();function onResponse(e){e.upgrade=true}function onUpgrade(e,t,r){process.nextTick((function(){onConnect(e,t,r)}))}function onConnect(i,s,a){o.removeAllListeners();s.removeAllListeners();if(i.statusCode!==200){c("tunneling socket could not be established, statusCode=%d",i.statusCode);s.destroy();var u=new Error("tunneling socket could not be established, "+"statusCode="+i.statusCode);u.code="ECONNRESET";e.request.emit("error",u);r.removeSocket(n);return}if(a.length>0){c("got illegal response body from proxy");s.destroy();var u=new Error("got illegal response body from proxy");u.code="ECONNRESET";e.request.emit("error",u);r.removeSocket(n);return}c("tunneling connection has established");r.sockets[r.sockets.indexOf(n)]=s;return t(s)}function onError(t){o.removeAllListeners();c("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var i=new Error("tunneling socket could not be established, "+"cause="+t.message);i.code="ECONNRESET";e.request.emit("error",i);r.removeSocket(n)}};TunnelingAgent.prototype.removeSocket=function removeSocket(e){var t=this.sockets.indexOf(e);if(t===-1){return}this.sockets.splice(t,1);var r=this.requests.shift();if(r){this.createSocket(r,(function(e){r.request.onSocket(e)}))}};function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,(function(n){var o=e.request.getHeader("host");var s=mergeOptions({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host});var a=i.connect(0,s);r.sockets[r.sockets.indexOf(n)]=a;t(a)}))}function toOptions(e,t,r){if(typeof e==="string"){return{host:e,port:t,localAddress:r}}return e}function mergeOptions(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n==="object"){var i=Object.keys(n);for(var o=0,s=i.length;o<s;++o){var a=i[o];if(n[a]!==undefined){e[a]=n[a]}}}}return e}var c;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){c=function(){var e=Array.prototype.slice.call(arguments);if(typeof e[0]==="string"){e[0]="TUNNEL: "+e[0]}else{e.unshift("TUNNEL:")}console.error.apply(console,e)}}else{c=function(){}}t.debug=c},6144:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.run=void 0;const i=r(2186);const o=n(r(7147));const s=n(r(4123));const a="token";const u="to";const l="message";const c="file";const run=async(e=i.getInput,t=i.setFailed)=>{try{const t=e(a);const r=new s.default.Bot(t);const n=e(u);const i=e(l);if(i){r.sendText(n,i)}const d=e(c);if(d){if(!o.default.existsSync(d)){throw new Error(`File ${d} doesn't exist`)}r.sendFile(n,Buffer.from(d).toString("base64"),d)}}catch(e){t(e.message)}};t.run=run;(0,t.run)()},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={exports:{}};var o=true;try{e[r].call(i.exports,i,i.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return i.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r=__nccwpck_require__(6144);module.exports=r})();